{% extends "user_layout.jinja2" %}

{% block detail %}
<form class="search-form" method="POST">

  <div class="container">
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Stock Ticker</label>
      <div class="col-sm-10">
        <input name="stock_ticker" class="form-control" type="text" 
                {% if filled_ticker %}
                  value={{ filled_ticker }}
                {% else %}
                  value="MSFT"
                {% endif %}
                id="example-date-input" required>
      </div>
    </div>
    <div class="form-group row">
      <label for="inputPassword3" class="col-sm-2 col-form-label">Start Date</label>
      <div class="col-sm-10">
        <input name="start_date" class="form-control" type="date"
               {% if start %}
                  value={{ start }}
               {% else %}
                  value="2016-08-19"
               {% endif %}
               id="example-date-input" required>
      </div>
    </div>
    <div class="form-group row">
      <label for="inputPassword3" class="col-sm-2 col-form-label">End Date</label>
      <div class="col-sm-10">
        <input name="end_date" class="form-control" type="date" 
               {% if end %}
                  value={{ end }}
               {% else %}
                  value="2017-08-19"
               {% endif %}
                id="example-date-input" required>
      </div>
    </div>
</div>

  {% if error %}
    <div class="alert alert-warning" role="alert">
      <h4 class="alert-heading">Error</h4>
      <hr>
      <p class="mb-0">{{ error }}</p>
    </div>
  {% endif %} 

  <div class="form-actions">
    <input class="btn btn-default btn-lg" name="search-button" type="submit" value="Analyze Stock">
  </div>
</form>

<div class="graph_container">
  {{ price_div|safe }}
  {{ price_script|safe }}
</div>
<div class="graph_container">
  {{ candle_div|safe }}
  {{ candle_script|safe }}
</div>
<div class="graph_container">
  {{ returns_div|safe }}
  {{ returns_script|safe }}
</div>

<div class="graph_container">
  {{ percent_div|safe }}
  {{ percent_script|safe }}
</div>

{% endblock %}
